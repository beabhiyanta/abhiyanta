---
import BaseLayout from "./BaseLayout.astro";
const { frontmatter } = Astro.props;
let chapters = await Astro.glob("../pages/chapter/*.md");
chapters = chapters.filter(
  (chapter) => chapter.frontmatter.module === frontmatter.title
);
chapters = chapters.sort((a, b) => a.frontmatter.order - b.frontmatter.order);
---

<BaseLayout pageTitle={frontmatter.title}>
  <div class="py-16">
    <label
      class="mb-2 block w-fit rounded px-4 text-gray-800"
      style={`background-color: ${frontmatter.color}`}
    >
      Module {frontmatter.order}
    </label>
    <h1>{frontmatter.title}</h1>
    <div class="grid sm:grid-cols-3">
      <div class="flex flex-col gap-8 py-8 sm:col-span-2">
        {
          chapters.map((chapter) => (
            <div>
              <h3>
                <>
                  <span>{chapter.frontmatter.order}.</span>
                  <a href={chapter.url}>{chapter.frontmatter.title}</a>
                </>
              </h3>
              <p>{chapter.frontmatter.description}</p>
            </div>
          ))
        }
      </div>
      <div class="sm:col-span-1">
        <img src={frontmatter.image} />
      </div>
    </div>
  </div>
</BaseLayout>
